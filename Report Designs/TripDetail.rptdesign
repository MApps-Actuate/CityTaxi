<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.6.0.v201610042049</property>
    <property name="units">in</property>
    <property name="theme">F-Type App.defaultTheme</property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="layoutPreference">fixed layout</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">96</property>
    <list-property name="libraries">
        <structure>
            <property name="fileName">/ThemesReportItems3.rptlibrary</property>
            <property name="namespace">ThemesReportItems3</property>
        </structure>
        <structure>
            <property name="fileName">Report Libraries/BIRT Online Maps.RPTLIBRARY</property>
            <property name="namespace">BIRT Online Maps</property>
        </structure>
        <structure>
            <property name="fileName">Report Libraries/F-Type App.rptlibrary</property>
            <property name="namespace">F-Type App</property>
        </structure>
    </list-property>
    <parameters>
        <scalar-parameter name="pTransactionID" id="142">
            <text-property name="promptText">Select the invoice ID</text-property>
            <property name="valueType">dynamic</property>
            <property name="dataSetName">Data Set - Param</property>
            <expression name="valueExpr" type="javascript">dataSetRow["TransactionID"]</expression>
            <expression name="labelExpr" type="javascript">dataSetRow["paramDisplay"]</expression>
            <expression name="sortByColumn">dataSetRow["paramDisplay"]</expression>
            <property name="sortDirection">asc</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">list-box</property>
            <property name="mustMatch">false</property>
            <property name="fixedOrder">false</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <data-mart-data-source name="Data Source" id="143">
            <property name="datamartURL">Data Objects/Global Data</property>
            <property name="accessType">latest</property>
        </data-mart-data-source>
    </data-sources>
    <data-sets>
        <data-mart-data-set name="Data Set" id="144">
            <list-property name="computedColumns">
                <structure>
                    <property name="name">BaseFare</property>
                    <expression name="expression" type="javascript">row["UnitPrice"]*row["Distance"]</expression>
                    <property name="dataType">float</property>
                </structure>
            </list-property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">TransactionID</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">TransactionID</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">DriverID</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">DriverID</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">DriverName</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">DriverName</text-property>
                    <text-property name="heading">DriverName</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">VehicleID</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">VehicleID</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">VehicleMake</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">VehicleMake</text-property>
                    <text-property name="heading">VehicleMake</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">City</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">City</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">TripDate</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">TripDate</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">StartTime</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">StartTime</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">EndTime</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">EndTime</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">CustomerName</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CustomerName</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">CarType</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CarType</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">StartLocationLat</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">StartLocationLat</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">StartLocationLong</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">StartLocationLong</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">EndLocationLat</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">EndLocationLat</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">EndLocationLong</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">EndLocationLong</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">Distance</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">Distance</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">Status</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">Status</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">UnitPrice</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">UnitPrice</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">Extras</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">Extras</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">Satisfaction</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">Satisfaction</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">CommentID</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CommentID</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">Comment</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">Comment</text-property>
                    <text-property name="heading">Comment</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">BaseFare</property>
                    <property name="analysis">measure</property>
                </structure>
            </list-property>
            <list-property name="filter">
                <structure>
                    <property name="operator">eq</property>
                    <expression name="expr" type="javascript">row["TransactionID"]</expression>
                    <simple-property-list name="value1">
                        <value>params["pTransactionID"].value</value>
                    </simple-property-list>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">TransactionID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">DriverID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">DriverName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">VehicleID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">VehicleMake</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">City</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">TripDate</property>
                        <property name="dataType">date</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">StartTime</property>
                        <property name="dataType">time</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">EndTime</property>
                        <property name="dataType">time</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">CustomerName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">CarType</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">StartLocationLat</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">StartLocationLong</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">EndLocationLat</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">EndLocationLong</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">16</property>
                        <property name="name">Distance</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">17</property>
                        <property name="name">Status</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">18</property>
                        <property name="name">UnitPrice</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">19</property>
                        <property name="name">Extras</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">20</property>
                        <property name="name">Satisfaction</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">21</property>
                        <property name="name">CommentID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">22</property>
                        <property name="name">Comment</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">23</property>
                        <property name="name">BaseFare</property>
                        <property name="dataType">float</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <property name="dataObject">Data Model</property>
            <list-property name="selectedColumns">
                <structure>
                    <property name="position">1</property>
                    <property name="name">TransactionID</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">DriverID</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">DriverName</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">VehicleID</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">VehicleMake</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">City</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">TripDate</property>
                    <property name="dataType">date</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">StartTime</property>
                    <property name="dataType">time</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">EndTime</property>
                    <property name="dataType">time</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">CustomerName</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">CarType</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">StartLocationLat</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">StartLocationLong</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">14</property>
                    <property name="name">EndLocationLat</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">15</property>
                    <property name="name">EndLocationLong</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">16</property>
                    <property name="name">Distance</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">17</property>
                    <property name="name">Status</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">18</property>
                    <property name="name">UnitPrice</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">19</property>
                    <property name="name">Extras</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">20</property>
                    <property name="name">Satisfaction</property>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="position">21</property>
                    <property name="name">CommentID</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">22</property>
                    <property name="name">Comment</property>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
        </data-mart-data-set>
        <data-mart-data-set name="Data Set - Param" id="429">
            <list-property name="computedColumns">
                <structure>
                    <property name="name">paramDisplay</property>
                    <expression name="expression" type="javascript">row["City"] + " - " + row["TripDate"] + " - " + row["CustomerName"] + " (" + row["TransactionID"] + ")"</expression>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">TransactionID</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">TransactionID</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">City</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">City</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">CustomerName</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CustomerName</text-property>
                    <property name="indexColumn">false</property>
                    <property name="compressed">false</property>
                </structure>
                <structure>
                    <property name="columnName">paramDisplay</property>
                    <property name="analysis">attribute</property>
                </structure>
            </list-property>
            <list-property name="filter"/>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">City</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">TransactionID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">CustomerName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">TripDate</property>
                        <property name="dataType">date</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">paramDisplay</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <property name="dataObject">Data Model</property>
            <list-property name="selectedColumns">
                <structure>
                    <property name="position">1</property>
                    <property name="name">City</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">TransactionID</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">CustomerName</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">TripDate</property>
                    <property name="dataType">date</property>
                </structure>
            </list-property>
        </data-mart-data-set>
    </data-sets>
    <styles>
        <style name="report" id="4">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
        <style name="crosstab-cell" id="5">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
        <style name="crosstab" id="6">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="City Taxi Portrait Page" id="428" extends="F-Type App.City Taxi Portrait Page">
            <overridden-values>
                <ref-entry baseId="16" id="16"/>
                <ref-entry baseId="17" id="17"/>
                <ref-entry baseId="18" id="18"/>
                <ref-entry baseId="19" id="19"/>
                <ref-entry baseId="20" id="20"/>
                <ref-entry baseId="21" id="21">
                    <property name="backgroundColor">#DDDDDD</property>
                </ref-entry>
                <ref-entry baseId="22" id="22"/>
            </overridden-values>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="153">
            <property name="fontFamily">"Lato"</property>
            <property name="dataSet">Data Set</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">TransactionID</property>
                    <text-property name="displayName">TransactionID</text-property>
                    <expression name="expression" type="javascript">dataSetRow["TransactionID"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">DriverID</property>
                    <text-property name="displayName">DriverID</text-property>
                    <expression name="expression" type="javascript">dataSetRow["DriverID"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">DriverName</property>
                    <text-property name="displayName">DriverName</text-property>
                    <expression name="expression" type="javascript">dataSetRow["DriverName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">VehicleID</property>
                    <text-property name="displayName">VehicleID</text-property>
                    <expression name="expression" type="javascript">dataSetRow["VehicleID"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">VehicleMake</property>
                    <text-property name="displayName">VehicleMake</text-property>
                    <expression name="expression" type="javascript">dataSetRow["VehicleMake"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">City</property>
                    <text-property name="displayName">City</text-property>
                    <expression name="expression" type="javascript">dataSetRow["City"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">TripDate</property>
                    <text-property name="displayName">TripDate</text-property>
                    <expression name="expression" type="javascript">dataSetRow["TripDate"]</expression>
                    <property name="dataType">date</property>
                </structure>
                <structure>
                    <property name="name">StartTime</property>
                    <text-property name="displayName">StartTime</text-property>
                    <expression name="expression" type="javascript">dataSetRow["StartTime"]</expression>
                    <property name="dataType">time</property>
                </structure>
                <structure>
                    <property name="name">EndTime</property>
                    <text-property name="displayName">EndTime</text-property>
                    <expression name="expression" type="javascript">dataSetRow["EndTime"]</expression>
                    <property name="dataType">time</property>
                </structure>
                <structure>
                    <property name="name">CustomerName</property>
                    <text-property name="displayName">CustomerName</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CustomerName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">CarType</property>
                    <text-property name="displayName">CarType</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CarType"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">StartLocationLat</property>
                    <text-property name="displayName">StartLocationLat</text-property>
                    <expression name="expression" type="javascript">dataSetRow["StartLocationLat"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">StartLocationLong</property>
                    <text-property name="displayName">StartLocationLong</text-property>
                    <expression name="expression" type="javascript">dataSetRow["StartLocationLong"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">EndLocationLat</property>
                    <text-property name="displayName">EndLocationLat</text-property>
                    <expression name="expression" type="javascript">dataSetRow["EndLocationLat"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">EndLocationLong</property>
                    <text-property name="displayName">EndLocationLong</text-property>
                    <expression name="expression" type="javascript">dataSetRow["EndLocationLong"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">Distance</property>
                    <text-property name="displayName">Distance</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Distance"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">Status</property>
                    <text-property name="displayName">Status</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Status"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">UnitPrice</property>
                    <text-property name="displayName">UnitPrice</text-property>
                    <expression name="expression" type="javascript">dataSetRow["UnitPrice"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">Extras</property>
                    <text-property name="displayName">Extras</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Extras"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">Satisfaction</property>
                    <text-property name="displayName">Satisfaction</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Satisfaction"]</expression>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="name">CommentID</property>
                    <text-property name="displayName">CommentID</text-property>
                    <expression name="expression" type="javascript">dataSetRow["CommentID"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Comment</property>
                    <text-property name="displayName">Comment</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Comment"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BaseFare</property>
                    <text-property name="displayName">BaseFare</text-property>
                    <expression name="expression" type="javascript">dataSetRow["BaseFare"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">TotalFare</property>
                    <expression name="expression" type="javascript">row["BaseFare"]+row["Extras"]</expression>
                    <property name="dataType">float</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">Duration</property>
                    <expression name="expression" type="javascript">BirtDateTime.diffMinute(row["StartTime"],row["EndTime"]) + " min."</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">GPSStart</property>
                    <expression name="expression" type="javascript">row["StartLocationLat"] +", " + row["StartLocationLong"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">GPSEnd</property>
                    <expression name="expression" type="javascript">row["EndLocationLat"] + " ," + row["EndLocationLong"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">BaseFareLabel</property>
                    <expression name="expression" type="javascript">if(row["UnitPrice"] == 2)&#13;
	"Base fare (off-peak) :"&#13;
else&#13;
	"Base fare (peak) :"</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">VehicleType</property>
                    <expression name="expression" type="javascript">if (row["CarType"] == "Standard")&#13;
	"car"&#13;
else if (row["CarType"] == "Luxury")&#13;
	"luxury car"&#13;
else&#13;
	"van"</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">DistanceLocal</property>
                    <expression name="expression" type="javascript">if (row["City"] == "San Francisco" || row["City"] == "New York City")&#13;
	Formatter.format(row["Distance"],"#0") + " miles"&#13;
else&#13;
	Formatter.format(row["Distance"],"#0") + " km"</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
            </list-property>
            <column id="427">
                <property name="width">10px</property>
            </column>
            <column id="160"/>
            <detail>
                <row id="156">
                    <cell id="425"/>
                    <cell id="157">
                        <grid id="163">
                            <column id="164"/>
                            <row id="165">
                                <cell id="166">
                                    <grid id="171">
                                        <column id="172"/>
                                        <column id="173"/>
                                        <row id="174">
                                            <cell id="175">
                                                <data id="183">
                                                    <property name="style">LargeDataItem</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="resultSetColumn">City</property>
                                                </data>
                                            </cell>
                                            <cell id="176">
                                                <data id="184">
                                                    <property name="style">LargeDataItem</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="resultSetColumn">CustomerName</property>
                                                </data>
                                            </cell>
                                        </row>
                                        <row id="177">
                                            <cell id="178">
                                                <data id="185">
                                                    <property name="style">MediumDataItem</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="resultSetColumn">TransactionID</property>
                                                </data>
                                            </cell>
                                            <cell id="179">
                                                <data id="186">
                                                    <property name="style">MediumDataItem</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="resultSetColumn">TripDate</property>
                                                </data>
                                            </cell>
                                        </row>
                                        <row id="404">
                                            <cell id="405">
                                                <property name="colSpan">2</property>
                                                <property name="rowSpan">1</property>
                                                <property name="paddingTop">12pt</property>
                                                <label id="407">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Vehicle information</text-property>
                                                </label>
                                            </cell>
                                        </row>
                                        <row id="180">
                                            <cell id="181">
                                                <property name="paddingTop">12pt</property>
                                                <property name="paddingLeft">12pt</property>
                                                <grid id="375">
                                                    <column id="376"/>
                                                    <column id="377"/>
                                                    <row id="378">
                                                        <cell id="379">
                                                            <property name="verticalAlign">bottom</property>
                                                            <text-data id="386">
                                                                <property name="style">SmallLabel</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="color">#99BADD</property>
                                                                <expression name="valueExpr">"Your " + row["VehicleType"] + " driver"</expression>
                                                                <property name="contentType">html</property>
                                                            </text-data>
                                                        </cell>
                                                        <cell id="380">
                                                            <property name="colSpan">1</property>
                                                            <property name="rowSpan">2</property>
                                                            <property name="textAlign">center</property>
                                                            <property name="verticalAlign">middle</property>
                                                            <image id="385">
                                                                <property name="source">file</property>
                                                                <expression name="uri" type="javascript">"Images/Icons/" + row["CarType"] + "REFLECT.png"</expression>
                                                            </image>
                                                        </cell>
                                                    </row>
                                                    <row id="381">
                                                        <cell id="382">
                                                            <property name="colSpan">1</property>
                                                            <property name="rowSpan">1</property>
                                                            <property name="verticalAlign">top</property>
                                                            <data id="193">
                                                                <property name="style">SmallDataItem</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="resultSetColumn">DriverName</property>
                                                            </data>
                                                        </cell>
                                                    </row>
                                                </grid>
                                            </cell>
                                            <cell id="182">
                                                <property name="paddingTop">12pt</property>
                                                <grid id="391">
                                                    <column id="392"/>
                                                    <column id="393"/>
                                                    <row id="394">
                                                        <cell id="395">
                                                            <property name="verticalAlign">bottom</property>
                                                            <label id="402">
                                                                <property name="style">SmallLabel</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="color">#99BADD</property>
                                                                <text-property name="text">Your vehicle</text-property>
                                                            </label>
                                                        </cell>
                                                        <cell id="397">
                                                            <property name="colSpan">1</property>
                                                            <property name="rowSpan">2</property>
                                                            <property name="textAlign">center</property>
                                                            <property name="verticalAlign">middle</property>
                                                            <image id="202">
                                                                <property name="source">file</property>
                                                                <expression name="uri" type="javascript">"Images/" + row["VehicleID"] + ".jpg"</expression>
                                                            </image>
                                                        </cell>
                                                    </row>
                                                    <row id="399">
                                                        <cell id="400">
                                                            <property name="colSpan">1</property>
                                                            <property name="rowSpan">1</property>
                                                            <property name="verticalAlign">top</property>
                                                            <data id="401">
                                                                <property name="style">SmallDataItem</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="resultSetColumn">VehicleMake</property>
                                                            </data>
                                                        </cell>
                                                    </row>
                                                </grid>
                                            </cell>
                                        </row>
                                    </grid>
                                </cell>
                            </row>
                            <row id="167">
                                <cell id="168">
                                    <grid id="203">
                                        <column id="204"/>
                                        <column id="205"/>
                                        <row id="292">
                                            <cell id="293">
                                                <property name="colSpan">2</property>
                                                <property name="rowSpan">1</property>
                                                <label id="295">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Trip information</text-property>
                                                </label>
                                            </cell>
                                        </row>
                                        <row id="300">
                                            <cell id="301">
                                                <property name="colSpan">2</property>
                                                <property name="rowSpan">1</property>
                                                <property name="paddingLeft">12pt</property>
                                                <grid id="303">
                                                    <property name="width">7.729166666666667in</property>
                                                    <column id="304">
                                                        <property name="width">3in</property>
                                                    </column>
                                                    <column id="305">
                                                        <property name="width">3in</property>
                                                    </column>
                                                    <column id="306"/>
                                                    <row id="307">
                                                        <cell id="308">
                                                            <grid id="215">
                                                                <property name="width">2.96875in</property>
                                                                <column id="216">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.9in</property>
                                                                </column>
                                                                <column id="217">
                                                                    <property name="width">2.0729166666666665in</property>
                                                                </column>
                                                                <row id="218">
                                                                    <cell id="219">
                                                                        <label id="296">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">Time start :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="220">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="221">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">StartTime</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                        <cell id="309">
                                                            <grid id="222">
                                                                <column id="223">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.9in</property>
                                                                </column>
                                                                <column id="224"/>
                                                                <row id="225">
                                                                    <cell id="226">
                                                                        <label id="297">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">Time end :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="227">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="228">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">EndTime</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                        <cell id="310">
                                                            <grid id="311">
                                                                <property name="width">1.6666666666666667in</property>
                                                                <column id="312">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.84375in</property>
                                                                </column>
                                                                <column id="313">
                                                                    <property name="width">0.8229166666666666in</property>
                                                                </column>
                                                                <row id="314">
                                                                    <cell id="315">
                                                                        <label id="316">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">Duration :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="317">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="318">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <structure name="numberFormat">
                                                                                <property name="category">Fixed</property>
                                                                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">Duration</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                    </row>
                                                </grid>
                                            </cell>
                                        </row>
                                        <row id="319">
                                            <cell id="320">
                                                <property name="colSpan">2</property>
                                                <property name="rowSpan">1</property>
                                                <property name="paddingLeft">12pt</property>
                                                <grid id="338">
                                                    <property name="width">7.729166666666667in</property>
                                                    <column id="339">
                                                        <property name="width">3in</property>
                                                    </column>
                                                    <column id="340">
                                                        <property name="width">3in</property>
                                                    </column>
                                                    <column id="341"/>
                                                    <row id="342">
                                                        <cell id="343">
                                                            <grid id="344">
                                                                <property name="width">2.96875in</property>
                                                                <column id="345">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.9in</property>
                                                                </column>
                                                                <column id="346">
                                                                    <property name="width">2.0729166666666665in</property>
                                                                </column>
                                                                <row id="347">
                                                                    <cell id="348">
                                                                        <label id="349">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">GPS start :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="350">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="351">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">GPSStart</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                        <cell id="352">
                                                            <grid id="353">
                                                                <column id="354">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.9in</property>
                                                                </column>
                                                                <column id="355"/>
                                                                <row id="356">
                                                                    <cell id="357">
                                                                        <label id="358">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">GPS end :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="359">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="360">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">GPSEnd</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                        <cell id="361">
                                                            <grid id="362">
                                                                <property name="width">1.6666666666666667in</property>
                                                                <column id="363">
                                                                    <property name="textAlign">right</property>
                                                                    <property name="width">0.84375in</property>
                                                                </column>
                                                                <column id="364">
                                                                    <property name="width">0.8229166666666666in</property>
                                                                </column>
                                                                <row id="365">
                                                                    <cell id="366">
                                                                        <label id="367">
                                                                            <property name="style">SmallLabel</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <property name="color">#99BADD</property>
                                                                            <text-property name="text">Distance :</text-property>
                                                                        </label>
                                                                    </cell>
                                                                    <cell id="368">
                                                                        <property name="style">DataItemBG</property>
                                                                        <property name="backgroundColor">#CCDCEE</property>
                                                                        <data id="369">
                                                                            <property name="style">SmallDataItem</property>
                                                                            <property name="fontFamily">"Lato"</property>
                                                                            <structure name="dateTimeFormat">
                                                                                <property name="category">Short Time</property>
                                                                                <property name="pattern">Short Time</property>
                                                                            </structure>
                                                                            <structure name="numberFormat">
                                                                                <property name="category">Fixed</property>
                                                                                <property name="pattern">###0{RoundingMode=HALF_UP}</property>
                                                                            </structure>
                                                                            <property name="resultSetColumn">DistanceLocal</property>
                                                                        </data>
                                                                    </cell>
                                                                </row>
                                                            </grid>
                                                        </cell>
                                                    </row>
                                                </grid>
                                            </cell>
                                        </row>
                                        <row id="209">
                                            <cell id="210">
                                                <property name="paddingTop">12pt</property>
                                                <property name="paddingRight">12pt</property>
                                                <label id="370">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Fare calculation</text-property>
                                                </label>
                                            </cell>
                                            <cell id="211">
                                                <property name="paddingTop">12pt</property>
                                                <label id="403">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Best available route</text-property>
                                                </label>
                                            </cell>
                                        </row>
                                        <row id="212">
                                            <cell id="213">
                                                <property name="paddingTop">36pt</property>
                                                <property name="paddingLeft">1pt</property>
                                                <grid id="258">
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="width">2.5104166666666665in</property>
                                                    <column id="259">
                                                        <property name="textAlign">right</property>
                                                        <property name="width">1.65625in</property>
                                                    </column>
                                                    <column id="260">
                                                        <property name="textAlign">right</property>
                                                        <property name="width">0.8541666666666666in</property>
                                                    </column>
                                                    <row id="261">
                                                        <cell id="262">
                                                            <data id="372">
                                                                <property name="style">SmallLabel</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="color">#99BADD</property>
                                                                <property name="resultSetColumn">BaseFareLabel</property>
                                                            </data>
                                                        </cell>
                                                        <cell id="263">
                                                            <property name="style">DataItemBG</property>
                                                            <property name="backgroundColor">#CCDCEE</property>
                                                            <data id="271">
                                                                <property name="style">SmallDataItem</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <structure name="numberFormat">
                                                                    <property name="category">Fixed</property>
                                                                    <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                                                </structure>
                                                                <property name="resultSetColumn">BaseFare</property>
                                                            </data>
                                                        </cell>
                                                    </row>
                                                    <row id="264">
                                                        <cell id="265">
                                                            <label id="371">
                                                                <property name="style">SmallLabel</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="color">#99BADD</property>
                                                                <text-property name="text">Extras :</text-property>
                                                            </label>
                                                        </cell>
                                                        <cell id="266">
                                                            <property name="style">DataItemBG</property>
                                                            <property name="backgroundColor">#CCDCEE</property>
                                                            <data id="270">
                                                                <property name="style">SmallDataItem</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <structure name="numberFormat">
                                                                    <property name="category">Fixed</property>
                                                                    <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                                                </structure>
                                                                <property name="resultSetColumn">Extras</property>
                                                            </data>
                                                        </cell>
                                                    </row>
                                                    <row id="267">
                                                        <cell id="268">
                                                            <label id="373">
                                                                <property name="style">MediumLabel</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="color">#99BADD</property>
                                                                <text-property name="text">Total :</text-property>
                                                            </label>
                                                        </cell>
                                                        <cell id="269">
                                                            <property name="style">DataItemBG</property>
                                                            <property name="backgroundColor">#CCDCEE</property>
                                                            <data id="272">
                                                                <property name="style">MediumDataItem</property>
                                                                <property name="fontFamily">"Lato"</property>
                                                                <property name="borderTopColor">#5C5C5C</property>
                                                                <property name="borderTopStyle">solid</property>
                                                                <property name="borderTopWidth">1px</property>
                                                                <structure name="numberFormat">
                                                                    <property name="category">Fixed</property>
                                                                    <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                                                </structure>
                                                                <property name="resultSetColumn">TotalFare</property>
                                                            </data>
                                                        </cell>
                                                    </row>
                                                </grid>
                                            </cell>
                                            <cell id="214">
                                                <extended-item extensionName="HTMLControl" id="432">
                                                    <method name="clientOnCreate"><![CDATA[// This example demonstrates how create the map and markers using Google Map JSAPI

/* ----------------------------------------------------------------------------------------- */
/* This is the configuration object for creating the chart. You modify it to map your own data.
 * See inline comments for more details.
 */


var config = {
	/*
	 * The Google map key. You should provide your own key to use the Google Map
	 * JSAPI. Old key: AIzaSyDzX_T8DLWjYpJrzok5nmpgnNjeLPwUV2E
	 */
	googleMapKey : "",

	/*
	 * Provide the column binding names as shown below. If not all
	 * column names are specified, the template will use the sample data instead.
	 */

	/* Specify the column name as it appears in the data set.
	* Example: 
	* 	latitudeColumn : "LATITUDE"
	*/

	/* the column name for starting  latitude value */
	startLatitudeColumn : "StartLocationLat",
	/* the column name for starting  longitude value */
	startLongitudeColumn : "StartLocationLong",
	/* the column name for starting  latitude value */
	endLatitudeColumn : "EndLocationLat",
	/* the column name for starting  longitude value */
	endLongitudeColumn : "EndLocationLong",
	/* the column name for marker label text */
	markerLabelColumn : "TransactionID",
	/* specify the default center coornidates for the map */
	mapCenter : {
		/* the latitude for the center */
		lat : 39.808536,
		/* the longitude for the center */
		lng : -101.953125
	}
};

/* --------------------------------------------------------------------------------------- */
/*
 * Below is the implementation code for the example. In most cases you do not need to
 * modify it, unless you want to change the chart style, or behavior. 
 * Changing the config object above is sufficient. 
 */
 
// The Google Map jsapi url. You may provide your own api key and callback
// function name.
var googleMapScriptUrl = "https://maps.googleapis.com/maps/api/js?key="
		+ config.googleMapKey + "&amp;sensor=false&amp;callback=initialize";

// get the container id
var id = this.getId();
var map = null;
var lastInfowindow = null;
var customViz = this;
customViz.setPrintTimeOut(5000);
var data = this.getData();

config.testMode = !data || !data.columns || data.columns.length == 0;

function getData() {
//debugger;

		// use data bindings, make sure the column names in config is properly
		// set
		var data = customViz.getData();

		if (!data || !data.rows || !data.columns) {
			return [];
		}

		// gets the index for columns
		var i1 = -1, i2 = -1, i3 = -1, i4 = -1, i5 = -1;
		for (var i = 0; i < data.columns.length; i++) {
			if (data.columns[i] == config.startLatitudeColumn) {
				i1 = i;
			} else if (data.columns[i] == config.startLongitudeColumn) {
				i2 = i;
			} else if (data.columns[i] == config.endLatitudeColumn) {
				i3 = i;
			} else if (data.columns[i] == config.endLongitudeColumn) {
				i4 = i;
			} else if (data.columns[i] == config.markerLabelColumn) {
				i5 = i;
			}
		}

		if (i1 < 0 || i2 < 0 || i3 < 0 || i4 < 0 || i5 < 0) {
			return [];
		}

		// populate marker data by column index
		var markerData = [];
		for (var i = 0; i < data.rows.length; i++) {
			var row = data.rows[i];
			markerData.push([ row[i1], row[i2], row[i3], row[i4], row[i5] ]);
		}

		return markerData;
	
}

// load map jsapi
function loadMap(scriptUrl) {

	if (window.mapApiLoaded) {
		return;
	}

	// mark the flag to prevent duplicate loading
	window.mapApiLoaded = true;

	// make sure we only load the jsapi once
	var script = document.createElement('script');
	script.type = 'text/javascript';
	script.src = scriptUrl;
	document.body.appendChild(script);
}

// create the map
function createMap() {
    var data = getData();
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapCenter = new google.maps.LatLng(data[0][0], data[0][1]);  
    var mapOptions = {
      zoom:10,
      center: mapCenter
    };
  
    map = new google.maps.Map(document.getElementById(id, mapOptions));
    directionsDisplay.setMap(map);
    calcRoute(data[0][0], data[0][1], data[0][2], data[0][3]);
	customViz.setDelegate(map);
	// CreateMarker() calls google api that has untrackable async js call itself. 
	// It is not safe to call setPrintReady() here rather we need a timer to control it.
	window.setTimeout(function(){customViz.setPrintReady()} , 3000);
}

function calcRoute(startLat, startLong, endLat, endLong) {
debugger;
  var start = new google.maps.LatLng(startLat, startLong);
  var end = new google.maps.LatLng(endLat, endLong);
  directionsService = new google.maps.DirectionsService();
  var request = {
      origin:start,
      destination:end,
      travelMode: google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}


// check whether Google Map jsapi already loaded, duplicate loading may cause
// issues.
if (window.mapApiLoaded) {
	// directly create the map
	createMap();
} else {

	// due to the restriction of Google Map JSAPI, you must use a global
	// callback function, here we use "initialize". change the name if there's
	// any conflict
	window.initialize = function() {
		createMap();
	};

	// load jsapi and use callback to create the map
	loadMap(googleMapScriptUrl);
}
]]></method>
                                                    <property name="height">250px</property>
                                                    <property name="width">100%</property>
                                                    <property name="displayName">Google Map</property>
                                                </extended-item>
                                            </cell>
                                        </row>
                                    </grid>
                                </cell>
                            </row>
                            <row id="169">
                                <cell id="170">
                                    <grid id="273">
                                        <column id="274"/>
                                        <column id="275"/>
                                        <row id="276">
                                            <cell id="277">
                                                <property name="paddingTop">12pt</property>
                                                <property name="paddingRight">12pt</property>
                                                <label id="387">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Your rating</text-property>
                                                </label>
                                            </cell>
                                            <cell id="278">
                                                <property name="paddingTop">12pt</property>
                                                <label id="388">
                                                    <property name="style">MediumLabel</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="color">#99BADD</property>
                                                    <text-property name="text">Your appreciation</text-property>
                                                </label>
                                            </cell>
                                        </row>
                                        <row id="279">
                                            <cell id="280">
                                                <property name="paddingLeft">12pt</property>
                                                <property name="paddingBottom">1pt</property>
                                                <image id="374">
                                                    <property name="height">42px</property>
                                                    <property name="width">200px</property>
                                                    <property name="source">file</property>
                                                    <expression name="uri" type="javascript">"Images/Icons/star " + row["Satisfaction"] + ".png"</expression>
                                                </image>
                                            </cell>
                                            <cell id="281">
                                                <data id="282">
                                                    <property name="style">SmallDataItem</property>
                                                    <property name="fontFamily">"Lato"</property>
                                                    <property name="resultSetColumn">Comment</property>
                                                </data>
                                            </cell>
                                        </row>
                                    </grid>
                                </cell>
                            </row>
                        </grid>
                    </cell>
                </row>
            </detail>
            <footer>
                <row id="158">
                    <cell id="426"/>
                    <cell id="159"/>
                </row>
            </footer>
        </table>
        <text id="433">
            <property name="contentType">html</property>
            <text-property name="content"><![CDATA[<script type="text/javascript">(function() {var walkme = document.createElement('script'); walkme.type = 'text/javascript'; walkme.async = true; walkme.src = 'http://cdn.walkme.com/users/c3a6e9dcce4d42798d27207362f992fa/walkme_c3a6e9dcce4d42798d27207362f992fa.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(walkme, s); window._walkmeConfig = {smartLoad:true}; })();</script>]]></text-property>
        </text>
    </body>
</report>
